const CATEGORIES=["Comedy","Action","Sci-Fi"];function createElementWithClass(tag,className){let div=document.createElement(tag);return div.setAttribute("class",className),div}function getRatingStars(rating){let roundedRating=Math.ceil(2*rating)/4,starRating;return fullStar='<i class="fas fa-star fa-sm" style="color:#7957ec"></i>',halfStar='<i class="fas fa-star-half-alt fa-sm" style="color:#7957ec"></i>',emptyStar='<i class="fas fa-star fa-sm" style="color:#2a2d2e"></i>',fullStar.repeat(roundedRating-roundedRating%1)+(roundedRating%1!=0?halfStar:"")+emptyStar.repeat(5-Math.ceil(roundedRating))}function createMoviesCards(results,category){for(const result of results){let movie=createElementWithClass("div","item");movie.id=result.id;let image_div=createElementWithClass("div","item-image");movie.appendChild(image_div);let image=document.createElement("img");image.src=result.image_url,image_div.appendChild(image);let body_div=createElementWithClass("div","item-body");movie.appendChild(body_div);let title=createElementWithClass("div","item-title");title.innerHTML=result.title.substr(0,20)+(this.length>20?"&hellip;":""),body_div.appendChild(title);let description=createElementWithClass("div","item-description");description.innerHTML=result.year+" - "+getRatingStars(result.imdb_score),body_div.appendChild(description),document.getElementById("carousel-"+category).appendChild(movie),addModal(movie)}}async function queryPage(page,category){let response=await fetch(page),data=await response.json();return createMoviesCards(data.results,category),data.next}async function getCategory(category){let container=document.getElementById("carousel-"+category),loader=document.getElementById("loader-"+category);container.style.display="none";let nextPage=await queryPage(APIURL+"titles/?sort_by=-year;-imdb_score,-votes&genre="+category,category);loader.style.display="none",container.style.display="block";for(let i=0;i<5;i++)nextPage=await queryPage(nextPage,category)}